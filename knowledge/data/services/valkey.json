{
  "type": "valkey",
  "category": "database",
  "description": "High-performance key-value store (Redis-compatible fork)",
  "versions": [
    { "version": "7", "status": "current", "recommended": true }
  ],
  "modes": ["HA", "NON_HA"],
  "ports": {
    "default": 6379,
    "internal": true,
    "httpSupport": false
  },
  "configuration": {
    "yamlImport": {
      "required": ["hostname", "type", "mode"],
      "optional": ["minContainers", "maxContainers", "envVariables"]
    },
    "resources": {
      "minContainers": { "HA": 3, "NON_HA": 1 },
      "maxContainers": { "max": 6 },
      "verticalScaling": {
        "cpu": { "min": 1, "max": 32, "units": "cores" },
        "ram": { "min": 0.25, "max": 128, "units": "GB" }
      }
    },
    "persistence": {
      "rdb": {
        "enabled": true,
        "description": "Point-in-time snapshots"
      },
      "aof": {
        "enabled": false,
        "description": "Append-only file for durability"
      }
    }
  },
  "envVariables": {
    "autoGenerated": {
      "hostname": "Internal hostname for connections",
      "connectionString": "Full Valkey connection string",
      "host": "Valkey host (same as hostname)",
      "port": "Valkey port (6379)",
      "password": "Auto-generated secure password"
    }
  },
  "access": {
    "internal": "Accessible from other services via ${servicename_hostname}",
    "external": "No direct external access, use VPN for management",
    "auth": "Password authentication required"
  },
  "compatibility": {
    "redis": "100% Redis protocol compatible",
    "clients": "Works with all Redis clients",
    "commands": "Supports all Redis commands"
  },
  "features": [
    "In-memory data store",
    "Persistence options",
    "Pub/Sub messaging",
    "Lua scripting",
    "Transactions",
    "Pipelining",
    "Clustering in HA mode",
    "Replication"
  ],
  "bestPractices": [
    "Use HA mode for production workloads",
    "Configure maxmemory policy for cache use cases",
    "Use connection pooling in your application",
    "Monitor memory usage closely",
    "Use appropriate data structures",
    "Enable persistence for data safety",
    "Set proper eviction policies"
  ],
  "connectionStrings": {
    "standard": "redis://:${password}@${hostname}:6379",
    "withDb": "redis://:${password}@${hostname}:6379/0",
    "ioredis": "${hostname}:6379",
    "nodeRedis": {
      "url": "redis://:${password}@${hostname}:6379"
    }
  },
  "useCases": {
    "caching": {
      "description": "Application cache layer",
      "config": {
        "maxmemory-policy": "allkeys-lru"
      }
    },
    "sessions": {
      "description": "Session storage",
      "config": {
        "maxmemory-policy": "volatile-lru"
      }
    },
    "queues": {
      "description": "Job/message queues",
      "features": ["Lists", "Pub/Sub", "Streams"]
    },
    "realtime": {
      "description": "Real-time features",
      "features": ["Pub/Sub", "Streams"]
    }
  },
  "examples": {
    "basic": {
      "yamlImport": {
        "services": [
          {
            "hostname": "cache",
            "type": "valkey@7",
            "mode": "NON_HA"
          }
        ]
      }
    },
    "production": {
      "yamlImport": {
        "services": [
          {
            "hostname": "cache",
            "type": "valkey@7",
            "mode": "HA",
            "minContainers": 3
          }
        ]
      }
    },
    "withApp": {
      "yamlImport": {
        "services": [
          {
            "hostname": "cache",
            "type": "valkey@7",
            "mode": "HA"
          },
          {
            "hostname": "api",
            "type": "nodejs@20",
            "ports": [{ "port": 3000, "httpSupport": true }],
            "envVariables": {
              "REDIS_URL": "redis://:${cache_password}@${cache_hostname}:6379",
              "CACHE_HOST": "${cache_hostname}",
              "CACHE_PASSWORD": "${cache_password}"
            }
          }
        ]
      }
    }
  },
  "migration": {
    "fromRedis": "Valkey is a drop-in replacement for Redis, no code changes needed"
  }
}