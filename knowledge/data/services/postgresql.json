{
  "type": "postgresql",
  "category": "database",
  "description": "PostgreSQL relational database",
  "versions": [
    { "version": "16", "status": "current", "recommended": true },
    { "version": "15", "status": "active" },
    { "version": "14", "status": "active" },
    { "version": "13", "status": "maintenance" },
    { "version": "12", "status": "maintenance" }
  ],
  "modes": ["HA", "NON_HA"],
  "ports": {
    "default": 5432,
    "internal": true,
    "httpSupport": false
  },
  "configuration": {
    "yamlImport": {
      "required": ["hostname", "type", "mode"],
      "optional": ["minContainers", "maxContainers", "envVariables"]
    },
    "resources": {
      "minContainers": { "HA": 3, "NON_HA": 1 },
      "maxContainers": { "max": 6 },
      "verticalScaling": {
        "cpu": { "min": 1, "max": 32, "units": "cores" },
        "ram": { "min": 0.25, "max": 128, "units": "GB" },
        "disk": { "min": 5, "max": 5000, "units": "GB" }
      }
    }
  },
  "envVariables": {
    "system": {
      "POSTGRES_VERSION": "${version}",
      "PGDATA": "/var/lib/postgresql/data"
    },
    "autoGenerated": {
      "hostname": "Internal hostname for connections",
      "connectionString": "Full PostgreSQL connection string",
      "host": "Database host (same as hostname)",
      "port": "Database port (5432)",
      "database_name": "Name of the default database",
      "user": "Database username",
      "password": "Auto-generated secure password"
    }
  },
  "access": {
    "internal": "Accessible from other services via ${servicename_hostname}",
    "external": "No direct external access, use VPN for management",
    "ssl": "SSL/TLS enabled by default for all connections"
  },
  "backups": {
    "automatic": true,
    "retention": "7 days",
    "type": "Point-in-time recovery"
  },
  "bestPractices": [
    "Use HA mode for production workloads",
    "Configure connection pooling in your application",
    "Use environment variables for connection details",
    "Monitor disk usage and scale accordingly",
    "Use specific version instead of latest",
    "Enable query logging for debugging",
    "Set up proper indexes for performance"
  ],
  "connectionStrings": {
    "standard": "postgresql://${user}:${password}@${hostname}:5432/${database_name}",
    "withSSL": "postgresql://${user}:${password}@${hostname}:5432/${database_name}?sslmode=require",
    "jdbc": "jdbc:postgresql://${hostname}:5432/${database_name}",
    "psycopg2": "host=${hostname} port=5432 dbname=${database_name} user=${user} password=${password}"
  },
  "extensions": {
    "available": [
      "postgis", "pg_trgm", "uuid-ossp", "hstore", "pg_stat_statements",
      "pgcrypto", "citext", "cube", "earthdistance", "fuzzystrmatch",
      "intarray", "ltree", "pg_buffercache", "pgrowlocks", "pgstattuple",
      "tablefunc", "unaccent"
    ],
    "popular": {
      "postgis": "Spatial and geographic objects",
      "uuid-ossp": "UUID generation",
      "pg_trgm": "Trigram matching for fuzzy search",
      "pgcrypto": "Cryptographic functions"
    }
  },
  "examples": {
    "basic": {
      "yamlImport": {
        "services": [
          {
            "hostname": "db",
            "type": "postgresql@16",
            "mode": "NON_HA"
          }
        ]
      }
    },
    "production": {
      "yamlImport": {
        "services": [
          {
            "hostname": "db",
            "type": "postgresql@16",
            "mode": "HA",
            "minContainers": 3,
            "maxContainers": 5
          }
        ]
      }
    },
    "withApp": {
      "yamlImport": {
        "services": [
          {
            "hostname": "db",
            "type": "postgresql@16",
            "mode": "HA"
          },
          {
            "hostname": "api",
            "type": "nodejs@20",
            "ports": [{ "port": 3000, "httpSupport": true }],
            "envVariables": {
              "DATABASE_URL": "postgresql://${db_user}:${db_password}@${db_hostname}:5432/${db_dbName}"
            }
          }
        ]
      }
    }
  }
}