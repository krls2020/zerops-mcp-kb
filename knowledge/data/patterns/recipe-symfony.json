{
  "patternId": "recipe-symfony",
  "name": "Symfony",
  "description": "Symfony application",
  "framework": "Symfony",
  "language": "PHP",
  "tags": [
    "symfony"
  ],
  "services": [
    {
      "enableSubdomainAccess": true,
      "envSecrets": {
        "APP_SECRET": "\u003c@generateRandomString(\u003c32\u003e)\u003e"
      },
      "hostname": "app",
      "type": "php-nginx@8.3"
    },
    {
      "hostname": "db",
      "mode": "NON_HA",
      "priority": 10,
      "type": "postgresql@16"
    },
    {
      "hostname": "redis",
      "mode": "NON_HA",
      "priority": 10,
      "type": "keydb@6"
    },
    {
      "enableSubdomainAccess": true,
      "hostname": "adminer",
      "maxContainers": 1,
      "type": "php-apache@8.3"
    },
    {
      "enableSubdomainAccess": true,
      "hostname": "mailpit",
      "maxContainers": 1,
      "type": "go@1"
    }
  ],
  "zeropsYml": {
    "zerops": [
      {
        "build": {
          "base": "php@8.3",
          "buildCommands": [
            "composer install --optimize-autoloader --no-dev",
            "php bin/console asset-map:compile",
            "php bin/console cache:warmup"
          ],
          "cache": [
            "vendor",
            "composer.lock"
          ],
          "deployFiles": "./",
          "envVariables": {
            "APP_ENV": "prod"
          }
        },
        "run": {
          "base": "php-nginx@8.3",
          "documentRoot": "public",
          "envVariables": {
            "APP_ENV": "prod",
            "DATABASE_URL": "${db_connectionString}/${db_dbName}?serverVersion=16\u0026charset=utf8",
            "MAILER_DSN": "smtp://mailpit:1025",
            "TRUSTED_PROXIES": "127.0.0.1,10.0.0.0/8"
          },
          "initCommands": [
            "php bin/console doctrine:migrations:migrate"
          ]
        },
        "setup": "app"
      }
    ]
  },
  "sourceRecipe": "recipe-symfony-main",
  "deploymentType": "local"
}